<app-HeaderPropio></app-HeaderPropio>

<section class="solicitar-turno">
  <h2>Solicitar Turno</h2>

  <!-- üîπ Especialidad -->
  <div class="bloque">
    <h3>1Ô∏è‚É£ Seleccione una especialidad</h3>
    <div class="lista">
      <button 
        *ngFor="let e of especialidades" 
        [class.seleccionado]="especialidadSeleccionada === e"
        (click)="especialidadSeleccionada = e; cargarEspecialistas()">
        {{ e }}
      </button>
    </div>
  </div>

  <!-- üîπ Especialista -->
  <div *ngIf="especialistas.length > 0" class="bloque">
    <h3>2Ô∏è‚É£ Seleccione un especialista</h3>
    <div class="lista">
      <button 
        *ngFor="let esp of especialistas"
        [class.seleccionado]="especialistaSeleccionado?.id === esp.id"
        (click)="seleccionarEspecialista(esp)">
        {{ esp.usuarios?.nombre }} {{ esp.usuarios?.apellido }}
      </button>
    </div>
  </div>

  <!-- üîπ Fecha -->
  <div *ngIf="especialistaSeleccionado" class="bloque">
    <h3>3Ô∏è‚É£ Seleccione una fecha (pr√≥ximos 15 d√≠as)</h3>
    <div class="lista">
      <button
        *ngFor="let f of fechasDisponibles"
        [class.seleccionado]="fechaSeleccionada === f"
        (click)="fechaSeleccionada = f; cargarHorariosDisponibles()">
        {{ formatearFecha(f) }}
      </button>
    </div>
  </div>

  <!-- üîπ Horario -->
  <div *ngIf="fechaSeleccionada" class="bloque">
    <h3>4Ô∏è‚É£ Seleccione un horario</h3>
    <div class="lista">
      <button
        *ngFor="let h of horariosDisponibles"
        [class.seleccionado]="horaSeleccionada === h"
        (click)="horaSeleccionada = h">
        {{ h }}
      </button>
    </div>
  </div>

  <!-- üîπ Paciente (solo admin) -->
  <div *ngIf="esAdmin" class="bloque">
    <h3>5Ô∏è‚É£ Seleccione el paciente</h3>
    <div class="lista">
      <button
        *ngFor="let p of pacientes"
        [class.seleccionado]="pacienteSeleccionado === p.id"
        (click)="pacienteSeleccionado = p.id">
        {{ p.nombre }} {{ p.apellido }}
      </button>
    </div>
  </div>

  <!-- üîπ Confirmar -->
  <div *ngIf="horaSeleccionada" class="bloque">
    <button class="confirmar-btn" (click)="confirmarTurno()">Confirmar Turno</button>
  </div>
</section>
